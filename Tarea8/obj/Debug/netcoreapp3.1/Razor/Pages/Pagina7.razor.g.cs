#pragma checksum "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "6a337ee3b4160937ea3fe7e4291defef30811744"
// <auto-generated/>
#pragma warning disable 1591
namespace Tarea8.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/_Imports.razor"
using Tarea8;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/_Imports.razor"
using Tarea8.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/_Imports.razor"
using Newtonsoft.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/_Imports.razor"
using System.Net;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/_Imports.razor"
using Radzen;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/_Imports.razor"
using Radzen.Blazor;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/pagina7")]
    public partial class Pagina7 : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.AddMarkupContent(0, "<div class=\"card rounded border border-danger\">\r\n<div class=\"card-head bg-danger\">\r\n<h3 class=\"text-center text-white\"><strong>Configuración</strong></h3>\r\n</div>\r\n</div>\r\n\r\n");
            __builder.OpenElement(1, "div");
            __builder.AddAttribute(2, "id", "accordion");
            __builder.AddMarkupContent(3, "\r\n    ");
            __builder.OpenElement(4, "div");
            __builder.AddAttribute(5, "class", "card");
            __builder.AddMarkupContent(6, "\r\n        ");
            __builder.AddMarkupContent(7, @"<div class=""card-header"" id=""headingOne"">
            <h5 class=""mb-0"">
                <button class=""btn btn-link"" data-toggle=""collapse"" data-target=""#collapseOne"" aria-expanded=""true"" aria-controls=""collapseOne"">
                    Configurar Vacuna
                </button>
            </h5>
        </div>

        ");
            __builder.OpenElement(8, "div");
            __builder.AddAttribute(9, "id", "collapseOne");
            __builder.AddAttribute(10, "class", "collapse show");
            __builder.AddAttribute(11, "aria-labelledby", "headingOne");
            __builder.AddAttribute(12, "data-parent", "#accordion");
            __builder.AddMarkupContent(13, "\r\n            ");
            __builder.OpenElement(14, "div");
            __builder.AddAttribute(15, "class", "card-body");
            __builder.AddMarkupContent(16, "\r\n                ");
            __builder.AddMarkupContent(17, "<p>\r\n                    Ingrese una nueva vacuna\r\n                </p>\r\n                ");
            __builder.OpenElement(18, "input");
            __builder.AddAttribute(19, "type", "text");
            __builder.AddAttribute(20, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 23 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                                                VacunaNueva

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(21, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => VacunaNueva = __value, VacunaNueva));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.AddMarkupContent(22, "\r\n                <br>\r\n                ");
            __builder.AddMarkupContent(23, "<p>\r\n                    Ingrese una cantidad\r\n                </p>\r\n                ");
            __builder.OpenElement(24, "input");
            __builder.AddAttribute(25, "type", "number");
            __builder.AddAttribute(26, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 28 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                                                  VacunaCantidad

#line default
#line hidden
#nullable disable
            , culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.AddAttribute(27, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => VacunaCantidad = __value, VacunaCantidad, culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.AddMarkupContent(28, "\r\n                ");
            __builder.OpenElement(29, "button");
            __builder.AddAttribute(30, "class", "btn btn-primary");
            __builder.AddAttribute(31, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 29 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                                                          SetVacuna

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(32, "Ingresar");
            __builder.CloseElement();
            __builder.AddMarkupContent(33, "\r\n                <br>\r\n");
#nullable restore
#line 31 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                 if (Vacunas != null)
                {

#line default
#line hidden
#nullable disable
            __builder.AddContent(34, "                    ");
            __builder.OpenElement(35, "table");
            __builder.AddAttribute(36, "class", "table");
            __builder.AddMarkupContent(37, "\r\n                        ");
            __builder.AddMarkupContent(38, "<thead>\r\n                            <tr>\r\n                                <th>Marca</th>\r\n                            </tr>\r\n                        </thead>\r\n                        ");
            __builder.OpenElement(39, "tbody");
            __builder.AddMarkupContent(40, "\r\n");
#nullable restore
#line 40 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                             foreach (Vacuna vacuna in Vacunas)
                            {

#line default
#line hidden
#nullable disable
            __builder.AddContent(41, "                                ");
            __builder.OpenElement(42, "tr");
            __builder.AddMarkupContent(43, "\r\n                                    ");
            __builder.OpenElement(44, "td");
            __builder.AddContent(45, 
#nullable restore
#line 43 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                                         vacuna.MARCA

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(46, "\r\n                                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(47, "\r\n");
#nullable restore
#line 45 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                            }

#line default
#line hidden
#nullable disable
            __builder.AddContent(48, "                        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(49, "\r\n                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(50, "\r\n");
#nullable restore
#line 48 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                }
                else
                {

#line default
#line hidden
#nullable disable
            __builder.AddContent(51, "                    ");
            __builder.AddMarkupContent(52, "<p>Cargando...</p>\r\n");
#nullable restore
#line 52 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                }

#line default
#line hidden
#nullable disable
            __builder.AddContent(53, "            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(54, "\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(55, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(56, "\r\n\r\n    ");
            __builder.OpenElement(57, "div");
            __builder.AddAttribute(58, "class", "card");
            __builder.AddMarkupContent(59, "\r\n        ");
            __builder.AddMarkupContent(60, @"<div class=""card-header"" id=""headingTwo"">
            <h5 class=""mb-0"">
                <button class=""btn btn-link"" data-toggle=""collapse"" data-target=""#collapseTwo"" aria-expanded=""false"" aria-controls=""collapseTwo"">
                    Configurar Provincias
                </button>
            </h5>
        </div>
        ");
            __builder.OpenElement(61, "div");
            __builder.AddAttribute(62, "id", "collapseTwo");
            __builder.AddAttribute(63, "class", "collapse show");
            __builder.AddAttribute(64, "aria-labelledby", "headingTwo");
            __builder.AddAttribute(65, "data-parent", "#accordion");
            __builder.AddMarkupContent(66, "\r\n            ");
            __builder.OpenElement(67, "div");
            __builder.AddAttribute(68, "class", "card-body");
            __builder.AddMarkupContent(69, "\r\n                ");
            __builder.AddMarkupContent(70, "<p>\r\n                    Seleccione una provincia y luego altere su nombre\r\n                </p>\r\n                ");
            __builder.OpenElement(71, "input");
            __builder.AddAttribute(72, "type", "text");
            __builder.AddAttribute(73, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 70 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                                                ProvinciaSeleccionada

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(74, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => ProvinciaSeleccionada = __value, ProvinciaSeleccionada));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.AddMarkupContent(75, "\r\n                ");
            __builder.OpenElement(76, "select");
            __builder.AddAttribute(77, "class", "form-select");
            __builder.AddAttribute(78, "aria-label", "Default select example");
            __builder.AddAttribute(79, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 71 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                                                                                       ProvinciaSeleccionada

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(80, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => ProvinciaSeleccionada = __value, ProvinciaSeleccionada));
            __builder.SetUpdatesAttributeName("value");
            __builder.AddMarkupContent(81, "\r\n                    ");
            __builder.OpenElement(82, "option");
            __builder.AddAttribute(83, "selected", true);
            __builder.AddContent(84, "Elija su provincia");
            __builder.CloseElement();
            __builder.AddMarkupContent(85, "\r\n");
#nullable restore
#line 73 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                     if (ProvinciasAPI != null)
                    {
                        

#line default
#line hidden
#nullable disable
#nullable restore
#line 75 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                         foreach (Provincia provincia in ProvinciasAPI)
                        {

#line default
#line hidden
#nullable disable
            __builder.AddContent(86, "                            ");
            __builder.OpenElement(87, "option");
            __builder.AddAttribute(88, "value", 
#nullable restore
#line 77 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                                            provincia.NOMBRE

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(89, 
#nullable restore
#line 77 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                                                               provincia.NOMBRE

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(90, "\r\n");
#nullable restore
#line 78 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                        }

#line default
#line hidden
#nullable disable
#nullable restore
#line 78 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                         
                    }

#line default
#line hidden
#nullable disable
            __builder.AddContent(91, "                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(92, "\r\n                ");
            __builder.OpenElement(93, "button");
            __builder.AddAttribute(94, "class", "btn btn-primary");
            __builder.AddAttribute(95, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 81 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                                                          SetProvincia

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(96, "Actualizar");
            __builder.CloseElement();
            __builder.AddMarkupContent(97, "\r\n                <br>\r\n");
#nullable restore
#line 83 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                 if (ProvinciasAPI != null)
                {

#line default
#line hidden
#nullable disable
            __builder.AddContent(98, "                    ");
            __builder.OpenElement(99, "table");
            __builder.AddAttribute(100, "class", "table");
            __builder.AddMarkupContent(101, "\r\n                        ");
            __builder.AddMarkupContent(102, "<thead>\r\n                            <tr>\r\n                                <th>Id</th>\r\n                                <th>Nombre</th>\r\n                            </tr>\r\n                        </thead>\r\n                        ");
            __builder.OpenElement(103, "tbody");
            __builder.AddMarkupContent(104, "\r\n");
#nullable restore
#line 93 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                             foreach (Provincia provincia in ProvinciasAPI)
                            {

#line default
#line hidden
#nullable disable
            __builder.AddContent(105, "                                ");
            __builder.OpenElement(106, "tr");
            __builder.AddMarkupContent(107, "\r\n                                    ");
            __builder.OpenElement(108, "td");
            __builder.AddContent(109, 
#nullable restore
#line 96 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                                         Counter

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(110, "\r\n                                    ");
            __builder.OpenElement(111, "td");
            __builder.AddContent(112, 
#nullable restore
#line 97 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                                         provincia.NOMBRE

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(113, "\r\n                                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(114, "\r\n");
#nullable restore
#line 99 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                                IncreaseCount();
                            }

#line default
#line hidden
#nullable disable
            __builder.AddContent(115, "                        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(116, "\r\n                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(117, "\r\n");
#nullable restore
#line 103 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                }
                else
                {

#line default
#line hidden
#nullable disable
            __builder.AddContent(118, "                    ");
            __builder.AddMarkupContent(119, "<p>Cargando...</p>\r\n");
#nullable restore
#line 107 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
                }

#line default
#line hidden
#nullable disable
            __builder.AddContent(120, "            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(121, "\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(122, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(123, "\r\n");
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 113 "/home/elmer/Desktop/tareas_de_p3/Tarea8/Tarea8/Pages/Pagina7.razor"
       
    
    [Inject]
    IJSRuntime JS { get; set; }
    private Vacuna[] Vacunas;
    private string VacunaNueva;
    private int VacunaCantidad;
    private List<string> Provincias = new List<string>() { "Azua", "Bahoruco", "Barahona", "Dajabón", "Distrito Nacional", "Duarte", "Elías Piña", "El Seibo", "Espaillat", "Hato Mayor", "Hermanas Mirabal", "Independencia", "La Altagracia", "La Romana", "La Vega", "María Trinidad Sánchez", "Monseñor Nouel", "Monte Cristi", "Monte Plata", "Pedernales", "Peravia", "Puerto Plata", "Samaná", "Sánchez Ramírez", "San Cristóbal", "San José de Ocoa", "San Juan", "San Pedro de Macorís", "Santiago", "Santiago Rodríguez", "Santo Domingo", "Valverde" };
    private Provincia[] ProvinciasAPI;
    private string ProvinciaSeleccionada;
    private int Counter = 1;

    protected override async Task OnInitializedAsync()
    {
        await GetVacunas();
        await GetProvincias();
    }

    public void IncreaseCount()
    {
        Counter++;
    }

    public async Task SetProvincia()
    {
        if (ProvinciaSeleccionada != "Elija su provincia" || ProvinciaSeleccionada != null)
        {
            var pos = Provincias.IndexOf(ProvinciaSeleccionada) + 1;
            var api = $"https://api-vacuna.herokuapp.com/api/Modificar_Pro/{ProvinciaSeleccionada}/{pos}";
            WebClient cliente = new WebClient();
            var datos = await cliente.DownloadStringTaskAsync(new Uri(api));
            var result = JsonConvert.DeserializeObject<Result>(datos);

            await JS.InvokeAsync<object>("alert", result.mensaje);
            await GetProvincias();
        }
        else
        {
            await JS.InvokeAsync<object>("alert", "Debe seleccionar una provincia");
        }
    }

    public async Task SetVacuna()
    {
        if (VacunaNueva != null && VacunaCantidad > 0)
        {
            var api = $"https://api-vacuna.herokuapp.com/api/Registrar_v/{VacunaNueva}/{VacunaCantidad}";
            WebClient cliente = new WebClient();
            var datos = await cliente.DownloadStringTaskAsync(new Uri(api));
            var result = JsonConvert.DeserializeObject<Result>(datos);

            await JS.InvokeAsync<object>("alert", result.mensaje);
            await GetVacunas();
        }
        else
        {
            await JS.InvokeAsync<object>("alert", "Debe completar los campos correctamente");
        }
    }

    public async Task GetProvincias()
    {
        var api = $"https://api-vacuna.herokuapp.com/api/Provinvias";
        WebClient cliente = new WebClient();
        var datos = await cliente.DownloadStringTaskAsync(new Uri(api));
        ProvinciasAPI = JsonConvert.DeserializeObject<Provincia[]>(datos);
    }

    public async Task GetVacunas()
    {
        var api = $"https://api-vacuna.herokuapp.com/api/Vacunas";
        WebClient cliente = new WebClient();
        var datos = await cliente.DownloadStringTaskAsync(new Uri(api));
        Vacunas= JsonConvert.DeserializeObject<Vacuna[]>(datos);
    }

    public class Provincia
    {
        public string NOMBRE { get; set; }
    }

    public class Vacuna
    {
        public string MARCA { get; set; }
    }

    public class Result
    {
        public string mensaje { get; set; }
    }

#line default
#line hidden
#nullable disable
    }
}
#pragma warning restore 1591
